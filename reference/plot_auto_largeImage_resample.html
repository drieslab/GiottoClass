<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Downsample largeImage for plotting. Uses spatSample
to load only a portion of the original image, speeding up plotting and lowering memory
footprint.
Default behavior of spatSample is to crop if only a smaller ROI is needed for plotting
followed by the sampling process in order to reduce wasted sampling by focusing the
sample space. For very large ROIs, this crop can be time intensive and require
writing to disk.
This function examines the ROI dimensions as defined through the limits of the spatial
locations to be plotted, and decides between the following two methods in order to
avoid this issue:
Method A. First crop original image and then sample n values where
n = 500,000 to generate final image
Method B. First oversample n values and then crop, where n = 500,000
scaled by a value &amp;gt;1. Scaling factor increases the smaller the ROI is and
is defined by: original dimensions/crop dimensions where the larger ratio between
x and y dims is chosen. Scale factor is capped by max_resample_scale
Control points for this function are set by max_crop which decides the max
ROI area after which switchover to method B happens in order to avoid laborious crops
and max_resample_scale which determines the maximum scale factor for number
of values to sample. Both values can be adjusted depending on system resources.
Additionally, flex_resample determines if this switching behavior happens.
When set to FALSE, only method A is used."><title>Optimized largeImage resampling — plot_auto_largeImage_resample • GiottoClass</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.7/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimized largeImage resampling — plot_auto_largeImage_resample"><meta property="og:description" content="Downsample largeImage for plotting. Uses spatSample
to load only a portion of the original image, speeding up plotting and lowering memory
footprint.
Default behavior of spatSample is to crop if only a smaller ROI is needed for plotting
followed by the sampling process in order to reduce wasted sampling by focusing the
sample space. For very large ROIs, this crop can be time intensive and require
writing to disk.
This function examines the ROI dimensions as defined through the limits of the spatial
locations to be plotted, and decides between the following two methods in order to
avoid this issue:
Method A. First crop original image and then sample n values where
n = 500,000 to generate final image
Method B. First oversample n values and then crop, where n = 500,000
scaled by a value &amp;gt;1. Scaling factor increases the smaller the ROI is and
is defined by: original dimensions/crop dimensions where the larger ratio between
x and y dims is chosen. Scale factor is capped by max_resample_scale
Control points for this function are set by max_crop which decides the max
ROI area after which switchover to method B happens in order to avoid laborious crops
and max_resample_scale which determines the maximum scale factor for number
of values to sample. Both values can be adjusted depending on system resources.
Additionally, flex_resample determines if this switching behavior happens.
When set to FALSE, only method A is used."><meta property="og:image" content="https://drieslab.github.io/GiottoClass/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GiottoClass</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9010</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Documentation</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/drieslab/GiottoClass/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Optimized largeImage resampling</h1>
      
      <div class="d-none name"><code>plot_auto_largeImage_resample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downsample <code>largeImage</code> for plotting. Uses <code><a href="https://rdrr.io/pkg/terra/man/sample.html" class="external-link">spatSample</a></code>
to load only a portion of the original image, speeding up plotting and lowering memory
footprint.</p>
<p>Default behavior of <code>spatSample</code> is to crop if only a smaller ROI is needed for plotting
followed by the sampling process in order to reduce wasted sampling by focusing the
sample space. For very large ROIs, this crop can be time intensive and require
writing to disk.</p>
<p>This function examines the ROI dimensions as defined through the limits of the spatial
locations to be plotted, and decides between the following two methods in order to
avoid this issue:</p><ul><li><p><strong>Method A.</strong> First crop original image and then sample n values where
n = 500,000 to generate final image</p></li>
<li><p><strong>Method B.</strong> First oversample n values and then crop, where n = 500,000
scaled by a value &gt;1. Scaling factor increases the smaller the ROI is and
is defined by: original dimensions/crop dimensions where the larger ratio between
x and y dims is chosen. Scale factor is capped by <code>max_resample_scale</code></p></li>
</ul><p>Control points for this function are set by <code>max_crop</code> which decides the max
ROI area after which switchover to method B happens in order to avoid laborious crops
and <code>max_resample_scale</code> which determines the maximum scale factor for number
of values to sample. Both values can be adjusted depending on system resources.
Additionally, <code>flex_resample</code> determines if this switching behavior happens.
When set to <code>FALSE</code>, only method A is used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_auto_largeImage_resample</span><span class="op">(</span></span>
<span>  <span class="va">gobject</span>,</span>
<span>  giottoLargeImage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  largeImage_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spat_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spat_loc_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  polygon_feat_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  include_image_in_border <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  flex_resample <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_crop <span class="op">=</span> <span class="fl">1e+08</span>,</span>
<span>  max_resample_scale <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>gobject</dt>
<dd><p><code>gobject</code> containing <code>largeImage</code> object</p></dd>


<dt>giottoLargeImage</dt>
<dd><p><code>largeImage</code> object to resample if not provided through
<code>gobject</code> and <code>largeImage_name</code></p></dd>


<dt>largeImage_name</dt>
<dd><p>name of <code>largeImage</code> in <code>gobject</code></p></dd>


<dt>spat_unit</dt>
<dd><p>spatial unit</p></dd>


<dt>spat_loc_name</dt>
<dd><p>name of spatial locations to plot</p></dd>


<dt>polygon_feat_type</dt>
<dd><p>name of polygon/spatial_info to plot</p></dd>


<dt>include_image_in_border</dt>
<dd><p>logical. expand the extent sampled to also show image in
border regions not included in spatlocs. This prevents images in plots from
being sharply cut off around the furthest spatial locations. (default is <code>TRUE</code>)</p></dd>


<dt>flex_resample</dt>
<dd><p>logical. Whether to allow automatic selection of sampling
workflow as defined in details sections. (default is <code>TRUE</code>)</p></dd>


<dt>max_crop</dt>
<dd><p>maximum crop size allowed for <strong>method A</strong> before switching to
<strong>method B</strong> (see description)</p></dd>


<dt>max_resample_scale</dt>
<dd><p>maximum cells allowed to resample to compensate for
decreased resolution when cropping after sampling</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a <code>giottoLargeImage</code> cropped and resampled properly for plotting</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/terra/man/sample.html" class="external-link">spatSample</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.drieslab.com" class="external-link">Ruben Dries</a>, Jiaji George Chen, <a href="https://labs.icahn.mssm.edu/yuanlab/" class="external-link">Guo-Cheng Yuan</a>, Matthew O’Brien, <a href="https://josschavezf.github.io" class="external-link">Joselyn C. Chávez-Fuentes</a>, Edward Ruiz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

