<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Stitch multiple giottoLargeImage objects into a single giottoLargeImage object — stitchGiottoLargeImage • GiottoClass</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stitch multiple giottoLargeImage objects into a single giottoLargeImage object — stitchGiottoLargeImage"><meta name="description" content="Function to stitch together multiple field of view (FOV) images
into a single final image. Images are loaded into Giotto
as giottoLargeImage and stitched based on a set of FOV positions
into a single final giottoLargeImage."><meta property="og:description" content="Function to stitch together multiple field of view (FOV) images
into a single final image. Images are loaded into Giotto
as giottoLargeImage and stitched based on a set of FOV positions
into a single final giottoLargeImage."><meta property="og:image" content="https://drieslab.github.io/GiottoClass/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GiottoClass</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/spatial_geometries.html">Spatial Geometry Objects</a></li>
    <li><a class="dropdown-item" href="../articles/image_tools.html">Images</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://drieslab.github.io/Giotto/">Suite</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/drieslab/GiottoClass/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Stitch multiple giottoLargeImage objects into a single giottoLargeImage object</h1>
      <small class="dont-index">Source: <a href="https://github.com/drieslab/Giotto/blob/website/R/images.R" class="external-link"><code>R/images.R</code></a></small>
      <div class="d-none name"><code>stitchGiottoLargeImage.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to stitch together multiple field of view (FOV) images
into a single final image. Images are loaded into Giotto
as <code>giottoLargeImage</code> and stitched based on a set of FOV positions
into a single final <code>giottoLargeImage</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stitchGiottoLargeImage</span><span class="op">(</span></span>
<span>  largeImage_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gobject_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  largeImage_nameList <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  FOV_positions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  FOV_xcol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  FOV_ycol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  FOV_inverty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mosaic"</span>, <span class="st">"merge"</span><span class="op">)</span>,</span>
<span>  round_positions <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dataType <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fileType <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dryRun <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-largeimage-list">largeImage_list<a class="anchor" aria-label="anchor" href="#arg-largeimage-list"></a></dt>
<dd><p>list of <code>giottoLargeImage</code> objects</p></dd>


<dt id="arg-gobject-list">gobject_list<a class="anchor" aria-label="anchor" href="#arg-gobject-list"></a></dt>
<dd><p>list of <code>gobjects</code>
containing <code>giottoLargeImages</code></p></dd>


<dt id="arg-largeimage-namelist">largeImage_nameList<a class="anchor" aria-label="anchor" href="#arg-largeimage-namelist"></a></dt>
<dd><p>list of names of <code>giottoLargeImages</code>
within <code>gobjects</code></p></dd>


<dt id="arg-fov-positions">FOV_positions<a class="anchor" aria-label="anchor" href="#arg-fov-positions"></a></dt>
<dd><p>dataframe of FOV positions. Values (if any) are
directly added to current image mapping</p></dd>


<dt id="arg-fov-xcol">FOV_xcol<a class="anchor" aria-label="anchor" href="#arg-fov-xcol"></a></dt>
<dd><p>column name for FOV position x values</p></dd>


<dt id="arg-fov-ycol">FOV_ycol<a class="anchor" aria-label="anchor" href="#arg-fov-ycol"></a></dt>
<dd><p>column name for FOV position y values</p></dd>


<dt id="arg-fov-inverty">FOV_inverty<a class="anchor" aria-label="anchor" href="#arg-fov-inverty"></a></dt>
<dd><p>make FOV y position values negative</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>method of stitching images (<strong>mosaic</strong>: average
overlapping area values, <strong>merge</strong>:values get priority by order of
images given)</p></dd>


<dt id="arg-round-positions">round_positions<a class="anchor" aria-label="anchor" href="#arg-round-positions"></a></dt>
<dd><p>boolean. Round image positions. May be necessary
to run.</p></dd>


<dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>file name to write the stitched image to. Defaults
to <code>"save_dir/stitch.tif"</code> if <code>save_dir</code> param is found in the
first <code>gobject</code>'s Giotto instructions</p></dd>


<dt id="arg-datatype">dataType<a class="anchor" aria-label="anchor" href="#arg-datatype"></a></dt>
<dd><p>(optional) values for <code>dataType</code> are "INT1U", "INT2U",
"INT2S", "INT4U", "INT4S", "FLT4S", "FLT8S". The first three letters
indicate whether the <code>dataType</code> is integer (whole numbers) of a real
number (decimal numbers), the fourth character indicates the number of
bytes used (allowing for large numbers and/or more precision), and the "S"
or "U" indicate whether the values are signed (both negative and positive)
or unsigned (positive values only).</p></dd>


<dt id="arg-filetype">fileType<a class="anchor" aria-label="anchor" href="#arg-filetype"></a></dt>
<dd><p>(optional) image format (e.g. .tif) If not given, defaults
to format given in the filename</p></dd>


<dt id="arg-dryrun">dryRun<a class="anchor" aria-label="anchor" href="#arg-dryrun"></a></dt>
<dd><p>boolean. Plot placeholder bounding rectangles where FOV images
will be stitched without actually proceeding with the full image stitching
and saving process.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>boolean. Overwrite if filename to save image as already
exists. Defaults to TRUE</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>boolean. Be verbose</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>largeGiottoImage</code> object with pointer to stitched image</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is time consuming. Setting a save location through the
<code>filename</code> parameter is also highly recommended as file size will
likely be large. This function creates a single stitched image from multiple
FOV tiles and saves that image to disk as it works. When finished, the
pointer to that new image is loaded in as a <code>giottoLargeImage</code>
object. <br><strong>Note:</strong> Dry runs are on by default and <code>dryRun</code>
param must be set to FALSE to proceed with the final stitching operation.</p>
    </div>
    <div class="section level2">
    <h2 id="dry-runs-are-default">Dry runs are default<a class="anchor" aria-label="anchor" href="#dry-runs-are-default"></a></h2>


<p>To ensure that disk space and time is not wasted, this function defaults
to previewing the stitching operation.</p>
    </div>
    <div class="section level2">
    <h2 id="fov-positions">FOV positions<a class="anchor" aria-label="anchor" href="#fov-positions"></a></h2>


<p>The final image is stitched together from multiple FOV tiles.
The <code>FOV_positions</code> parameter accepts a table of x and y values for
where each FOV tile should be placed when performing the stitch. Which
columns are the x and y values are determined by the <code>FOV_xcol</code>
and <code>FOV_ycol</code> params respectively. FOV tiles are at full resolution
with a starting position where either the lower left or upper left of
the image touch the origin depending on the value of <code>FOV_inverty</code>
param. The FOV image is then translated according to the x and y shift
values.</p>
    </div>
    <div class="section level2">
    <h2 id="fov-invert-y">FOV invert y<a class="anchor" aria-label="anchor" href="#fov-invert-y"></a></h2>


<p>Many imaging systems may treat the origin according to image convention
where (0,0) is at the upper left of an image. This is at odds with
coordinate convention and what Giotto uses internally where the
coordinate (0,0) is at the lower left. The <code>FOV_inverty</code> defaults
to FALSE, but if set to TRUE, then FOV tile images will start with the
upper left touching (0,0) and all y values given
through <code>FOV_positions</code> and <code>FOV_ycol</code> will be treated as
negative y shift values.</p>
    </div>
    <div class="section level2">
    <h2 id="datatype">dataType<a class="anchor" aria-label="anchor" href="#datatype"></a></h2>


<p>There are multiple datatypes defining the range of intensity values that
images can be saved with. Setting a value with the <code>dataType</code> para
is optional and Giotto attempts to determine compatible data type to
save the image as automatically.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">GiottoData</span><span class="fu">::</span><span class="fu"><a href="https://drieslab.github.io/GiottoData/reference/loadGiottoMini.html" class="external-link">loadGiottoMini</a></span><span class="op">(</span><span class="st">"visium"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 1. read Giotto object</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2. read Giotto feature information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3. read Giotto spatial information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3.1 read Giotto spatial shape information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3.2 read Giotto spatial centroid information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 3.3 read Giotto spatial overlap information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 4. read Giotto image information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> python already initialized in this session</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  active environment : 'giotto_env'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  python version : 3.10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> checking default envname 'giotto_env'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> a system default python environment was found</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using python path:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  "/usr/share/miniconda/envs/giotto_env/bin/python"</span>
<span class="r-in"><span><span class="va">g_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="getGiottoImage.html">getGiottoImage</a></span><span class="op">(</span><span class="va">g</span>, image_type <span class="op">=</span> <span class="st">"largeImage"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">stitchGiottoLargeImage</span><span class="op">(</span>largeImage_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">g_image</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="stitchGiottoLargeImage-1.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.drieslab.com" class="external-link">Ruben Dries</a>, <a href="https://github.com/jiajic" class="external-link">Jiaji George Chen</a>, <a href="https://labs.icahn.mssm.edu/yuanlab/" class="external-link">Guo-Cheng Yuan</a>, Matthew O’Brien, <a href="https://josschavezf.github.io" class="external-link">Joselyn C. Chávez-Fuentes</a>, Edward Ruiz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

