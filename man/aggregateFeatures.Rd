% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/aggregate.R
\name{aggregateFeatures}
\alias{aggregateFeatures}
\title{Aggregate Spatial Features Covered by Polygon Geometries}
\usage{
aggregateFeatures(
  gobject,
  spat_info = NULL,
  feat_info = NULL,
  image_names = NULL,
  new_spat_unit = NULL,
  new_feat_type = NULL,
  name = "raw",
  poly_subset_ids = NULL,
  feat_subset_column = NULL,
  feat_subset_values = NULL,
  feat_count_column = NULL,
  fun = "sum",
  return_gobject = TRUE,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{gobject}{\code{giotto} object containing spatial data to aggregate.}

\item{spat_info}{character. Name of polygon information to use to aggregate
features with.}

\item{feat_info}{character. Name of feature point detections to be
aggregated.}

\item{image_names}{character. Name of image(s) containing intensity values
to be aggregated.}

\item{new_spat_unit}{character (optional). Name of spatial unit to assign
the expression info to. Default is the same as \code{spat_info}.}

\item{new_feat_type}{character (optional). Name of feature type to assign
the expression info to. Default is the same as \code{feat_info} when used. When
\code{image_names} is used instead, default is "protein".}

\item{name}{character. (default = "raw") Name to assign the output
expresssion values information.}

\item{poly_subset_ids}{character vector. (optional) Specific poly_IDs to use}

\item{feat_subset_column}{character. (optional) feature info attribute to
subset feature points on when performing overlap calculation.}

\item{feat_subset_values}{(optional) values matched against
in \code{feat_subset_column} in order to subset feature points when performing
overlap calculation.}

\item{feat_count_column}{character. (optional) feature info column with counts
information. Useful in cases when more than one detection is reported per
point.}

\item{fun}{character (default = "sum"). A function usable by
\code{\link[exactextractr:exact_extract]{exactextractr::exact_extract()}} to aggregate image intensity values.}

\item{return_gobject}{logical (default = TRUE). Whether to return the
\code{giotto} object or just the aggregated expression values as \code{exprObj} class.}

\item{verbose}{logical. Whether to be verbose.}

\item{\dots}{Additional params to pass to the overlap calculation method.
None implemented for point overlaps. For intensity overlaps, passes to
\code{\link[exactextractr:exact_extract]{exactextractr::exact_extract()}} and additionally the function requested
with the \code{fun} param.}
}
\value{
\code{giotto} when \code{return_gobject=TRUE}, \code{exprObj} when
\code{return_gobject=FALSE}
}
\description{
Aggregate features (either \code{feat_info} OR \code{image_names}) with
polygons (\code{spat_info}). Under the hood, this is performed in two steps:
\enumerate{
\item Find the overlapped features via the lower-level generic
\code{\link[=calculateOverlap]{calculateOverlap()}}
\item Summarize the overlapped features as a matrix via \code{\link[=overlapToMatrix]{overlapToMatrix()}}
}
}
\details{
\code{feat_subset_column}, \code{feat_subset_values}, and \code{feat_count_column}
are specific to overlaps on feature points info, and should not be provided
when overlapping image data.
}
