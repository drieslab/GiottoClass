% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/classes.R, R/methods-extract.R
\docType{class}
\name{overlapPointDT-class}
\alias{overlapPointDT-class}
\alias{[,overlapPointDT,gIndex,missing,missing-method}
\alias{[,overlapPointDT,missing,gIndex,missing-method}
\alias{[,overlapPointDT,gIndex,gIndex,missing-method}
\title{Polygon and Point Relationships}
\usage{
\S4method{[}{overlapPointDT,gIndex,missing,missing}(x, i, j, ..., use_names = FALSE, ids = TRUE, drop)

\S4method{[}{overlapPointDT,missing,gIndex,missing}(x, i, j, ..., use_names = FALSE, ids = TRUE, drop)

\S4method{[}{overlapPointDT,gIndex,gIndex,missing}(x, i, j, ..., use_names = FALSE, drop)
}
\arguments{
\item{x}{object}

\item{i}{numeric, character, logical. Index of or name of poly in overlapping
polygons}

\item{j}{numeric, character, logical. Index of or name of feature being
overlapped.}

\item{\dots}{additional params to pass (none implemented)}

\item{use_names}{logical (default = \code{FALSE}). Whether to return as integer
indices or with character ids.}

\item{ids}{logical (default = \code{TRUE}). Whether to return the requested
integer indices (\code{TRUE}) or the subset overlap object (\code{FALSE}).}

\item{drop}{not used.}
}
\value{
integer or character if only \code{i} or \code{j} provided, depending on
\code{use_names}. A subset \code{overlapPointDT} if both \code{i} and \code{j} are used.
}
\description{
Utility class for storing overlaps relationships between polygons and points
in a sparse \code{data.table} format. Retrieve the unique ID index of overlapped
points \verb{[i, ]}. Get indices of which polys are overlapping specific feature
species using \verb{[, j]}.

Subsetting with \code{ids = FALSE} and \verb{[i, j]} indexing is also supported.

Supports \code{as.matrix} for conversion to \code{dgCMatrix}. Contained poly and
feature names simplify rownames/colnames and empty row/col creation.
}
\section{Slots}{

\describe{
\item{\code{data}}{data.table. Table containing 3 integer cols:
\itemize{
\item \code{poly} - polygon index. Maps to \code{spat_ids} slot.
\item \code{feat} - feat_ID_uniq (unique integer identifier) of a point detection
\item \code{feat_id_index} - index of feature name mapping in \verb{@feat_ids} slot.
}}

\item{\code{spat_unit}}{character. Spatial unit (usually name of polygons information)}

\item{\code{feat_type}}{character. Feature type (usually name of points information)}

\item{\code{provenance}}{character. provenance information}

\item{\code{spat_ids}}{character. Polygon names}

\item{\code{feat_ids}}{character. Feature names}

\item{\code{nfeats}}{integer (optional metadata). How many feature points were
used in overlap operation. Gives an idea of sparsity, but has no effect on
processing.}
}}

\examples{
g <- GiottoData::loadGiottoMini("vizgen")
poly <- g[["spatial_info", "z0"]][[1]]
ovlp <- overlaps(poly, "rna")
ovlp

as.matrix(ovlp)

dim(ovlp)
nrow(ovlp) # number of relationships

# get feature unique IDs overlapped by nth poly
ovlp[1] # check one (no overlaps returns integer(0))
ovlp[1:5] # check multiple
ovlp[1:5, use_names = TRUE] # returns feature names, but no longer unique

# get integer index of poly(s) overlapping particular feature species
ovlp[, 1]
ovlp[, "Mlc1"] # this is the same

# get a subset of overlap object
ovlp[1:10, ids = FALSE] # subset to first 10 polys
ovlp[, 1:10, ids = FALSE] # subset to first 10 feature species
ovlp[1:10, 1:10] # subset to first 10 polys and first 10 features species
}
